[gd_scene load_steps=12 format=3 uid="uid://cspttp4u53vb0"]

[ext_resource type="Script" path="res://Scripts/Enemy.gd" id="1_0qfyv"]
[ext_resource type="Texture2D" uid="uid://bnx0cntkc8w1" path="res://Level 1/LadderAngel/back_wing.png" id="1_nuypc"]
[ext_resource type="Texture2D" uid="uid://bjihvmvbem3tu" path="res://Level 1/LadderAngel/body.png" id="2_5xut1"]
[ext_resource type="Texture2D" uid="uid://0jsj83cb1tb2" path="res://Level 1/LadderAngel/front_wing.png" id="3_hun5u"]
[ext_resource type="Script" path="res://Scripts/EnemyBulletShooter.gd" id="4_mwmp6"]
[ext_resource type="PackedScene" uid="uid://buere3y5tga5y" path="res://Scenes/music_note.tscn" id="5_bqoxv"]
[ext_resource type="Script" path="res://Scripts/EnemyInkDropper.gd" id="6_lcebc"]
[ext_resource type="Script" path="res://Scripts/EnemyBulletDetection.gd" id="8_abehk"]
[ext_resource type="Script" path="res://Scripts/EnemyHealthTracker.gd" id="9_s2mkc"]

[sub_resource type="Animation" id="Animation_keobx"]
resource_name = "flap"
length = 1.5
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("BodyParts/BackWingPivot:skew")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.3, 1.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.174533, -1.01229]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BodyParts/FrontWingPivot:skew")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.3, 1.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.174533, -0.937242]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("BodyParts:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.3, 1.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, -45.2549)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("BodyParts/FrontWingPivot:scale")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.3, 1.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1, 0.5)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("BodyParts/BackWingPivot:scale")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.3, 1.05),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1, 0.5)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_e66je"]
_data = {
"flap": SubResource("Animation_keobx")
}

[node name="LadderAngel" type="Node2D" node_paths=PackedStringArray("EnemyBulletShooter")]
script = ExtResource("1_0qfyv")
EnemyBulletShooter = NodePath("BodyParts/Body/EnemyBulletShooter")

[node name="BodyParts" type="Node2D" parent="."]
position = Vector2(0, 4.49567e-07)

[node name="BackWingPivot" type="Node2D" parent="BodyParts"]
position = Vector2(54.6882, -161.068)
skew = 0.174533

[node name="BackWing" type="Sprite2D" parent="BodyParts/BackWingPivot"]
position = Vector2(-107.276, -92.7956)
texture = ExtResource("1_nuypc")

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="BodyParts/BackWingPivot/BackWing"]
remote_path = NodePath("../../../EnemyBulletDetection/BackWingCollider")

[node name="Body" type="Sprite2D" parent="BodyParts"]
position = Vector2(68.8207, 67.4884)
texture = ExtResource("2_5xut1")

[node name="EnemyBulletShooter" type="Node2D" parent="BodyParts/Body" node_paths=PackedStringArray("target")]
position = Vector2(193.696, 152.977)
script = ExtResource("4_mwmp6")
bullet = ExtResource("5_bqoxv")
target = NodePath("../EnemyBulletTarget")
bullet_damage = 0.5

[node name="InkDropSpot" type="Node2D" parent="BodyParts/Body" node_paths=PackedStringArray("enemy_bullet_detection")]
position = Vector2(-142.972, 368.24)
script = ExtResource("6_lcebc")
enemy_bullet_detection = NodePath("../../EnemyBulletDetection")

[node name="EnemyBulletTarget" type="Node2D" parent="BodyParts/Body"]
position = Vector2(231.309, 199.694)

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="BodyParts/Body"]
remote_path = NodePath("../../EnemyBulletDetection/BodyCollider")

[node name="FrontWingPivot" type="Node2D" parent="BodyParts"]
position = Vector2(-31.4644, -131.102)
skew = 0.174533

[node name="FrontWing" type="Sprite2D" parent="BodyParts/FrontWingPivot"]
position = Vector2(-220.98, -110.014)
texture = ExtResource("3_hun5u")

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="BodyParts/FrontWingPivot/FrontWing"]
remote_path = NodePath("../../../EnemyBulletDetection/FrontWingCollider")

[node name="EnemyBulletDetection" type="Area2D" parent="BodyParts"]
collision_layer = 0
collision_mask = 4
script = ExtResource("8_abehk")

[node name="BackWingCollider" type="CollisionPolygon2D" parent="BodyParts/EnemyBulletDetection"]
position = Vector2(-36.474, -252.454)
scale = Vector2(1, 1)
skew = 0.174533
polygon = PackedVector2Array(185, -116.6, 185, -115.3, 234, -91.2, 234, -89.9, 245, -79.9, 245, -77.5, 258, -59, 258, -19.6, 252, -8.5, 252, 3.3, 249.4, 11, 247.8, 11, 229, 28.8, 229, 30.3, 223.5, 48, 221.7, 48, 213.7, 54, 201.3, 54, 141, 73.4, 141, 74.2, 137, 76.2, 137, 78.6, 131, 87.6, 131, 114, 128.7, 114, 122.3, 119, 106.2, 119, 96.5, 113, 95.4, 113, 88, 114.4, 88, 112.1, 80.3, 107, 76.7, 107, 69, 104.4, 69, 103.1, 48.5, 91, 43.8, 91, 27, 87.6, 27, 86.3, 4, 76.3, 4, 75.1, -42.6, 45, -50.2, 45, -75.1, 39, -78.9, 39, -118, 41.1, -118, 39.5, -148.4, 29, -159, 29, -184, 28, -184, 26.7, -222, 18.6, -222, 17.2, -237, 10.3, -237, 8.9, -252, -4.1, -252, -6.3, -258, -13.8, -258, -45, -257.1, -45, -255.1, -48, -250, -48, -200, -49.9, -173, -59.4, -173, -60.3, -109.4, -88, -106.4, -88, -78.4, -99, -74.1, -99, -45.3, -107, -40.1, -107, -24.2, -111, 15, -111, 15, -109.9, 65, -107.1, 80.6, -114, 85.6, -114, 113.1, -119, 174.2, -119)

[node name="BodyCollider" type="CollisionPolygon2D" parent="BodyParts/EnemyBulletDetection"]
position = Vector2(68.8207, 67.4884)
polygon = PackedVector2Array(48.5, -378.6, 48.5, -376.8, 80.5, -343.8, 80.5, -340.3, 86.5, -326.4, 86.5, -294, 84.4, -294, 78.5, -287.3, 78.5, -278.7, 75.9, -271, 74.3, -271, 64.5, -262.1, 64.5, -260.4, 56.5, -247.5, 56.5, -244, 54.6, -199, 55.3, -199, 69.5, -184.8, 69.5, -182, 75, -163, 75.7, -163, 88.5, -140.5, 88.5, -137, 93.5, -117.2, 93.5, -98, 104.7, -76, 105.4, -76, 129.5, -46.7, 129.5, -44, 132, -33, 143.5, -18.7, 143.5, -10.6, 141.2, -5.29999, 160.5, 9, 160.5, 10.2, 183.5, 34.2, 183.5, 36.5, 186.5, 41.4, 186.5, 50.1, 183.5, 52.1, 183.5, 55, 184.1, 55, 186, 63, 187.4, 63, 214.4, 92, 216.7, 92, 223.7, 85, 226.1, 85, 239.1, 79, 250.9, 79, 259.5, 82.7, 259.5, 84.1, 271.5, 95.1, 271.5, 97.5, 272.5, 99.1, 272.5, 139.2, 262.6, 155, 260.3, 155, 232.3, 182, 230.1, 182, 224.1, 186, 220.8, 186, 185.8, 198, 179.5, 198, 137.5, 200, 137.5, 198.1, 119.5, 188.2, 119.5, 186.8, 110.5, 177.8, 110.5, 158.6, 117.1, 142, 118.8, 142, 132.5, 131, 132.5, 115.3, 127, 98, 114.5, 83, 112.7, 83, 99.5, 70.9, 99.5, 68.5, 88.4, 49, 86.7, 49, 77.8, 41, 75.2, 41, 58.5, 35.2, 60.5, 38.4, 60.5, 55.1, 59.4, 74, 57.7, 74, 49.7, 89, 48.4, 89, 41.5, 96.7, 41.5, 98.4, 33.9, 119, 32.5, 119, 10.5, 149.6, 10.5, 154.3, 0, 192, -1.39999, 192, -5.5, 199.5, -5.5, 201.2, 5.5, 202.2, 5.5, 203.9, 17.5, 211.9, 17.5, 215, 18.6, 236, 16.4, 236, 10.4, 243, 4.60001, 243, -11.5, 247.5, -11.5, 248.1, -32.9, 261, -59.5, 261, -59.5, 259.2, -68.5, 254.2, -68.5, 251.5, -73.5, 242.5, -73.5, 228.9, -72.7, 219.4, -82.5, 224.3, -82.5, 226.7, -85.5, 230.7, -85.5, 236.2, -93.8, 282, -95.1, 282, -102.5, 300.5, -102.5, 318, -57.5, 319, -57.5, 321.3, -50.5, 330.3, -50.5, 339.2, -52.9, 351, -54.5, 351, -57.5, 355, -60, 355, -85.9, 371, -89.1, 371, -116.1, 381, -155.5, 381, -162.5, 376, -162.5, 373.4, -166.5, 362.4, -166.5, 351.8, -163, 334, -169.5, 303.2, -169.5, 286.6, -224.8, 331, -230.3, 331, -267.5, 334.2, -267.5, 331.9, -272.5, 327.7, -272.5, 299.6, -266.5, 286.6, -266.5, 264.8, -261.1, 239, -259.4, 239, -245.4, 224, -243.1, 224, -227.5, 213, -227.5, 211.5, -223.5, 204.5, -223.5, 170, -221.8, 170, -210.5, 144.7, -210.5, 82, -208.9, 82, -199, 52.3, -216.5, 36.9, -216.5, 32.8, -214.2, 19, -212.9, 19, -203.8, -3, -202.3, -3, -191.5, -13.8, -191.5, -15.6, -184.6, -26, -183.2, -26, -173.5, -33.9, -173.5, -39.4, -165.5, -57.4, -165.5, -73, -166.7, -88, -165.3, -88, -161.5, -118.2, -161.5, -152, -165.5, -158.4, -165.5, -160.1, -163.4, -192, -161.6, -192, -142.6, -222, -141.2, -222, -120.5, -238.9, -120.5, -256, -121.7, -270, -120.2, -270, -118.1, -280, -116.6, -280, -102.5, -300.7, -102.5, -306.4, -98.9, -316, -97.1, -316, -91.5, -320, -91.5, -321.7, -51.5, -376, -48.8, -376, -36.5, -377.8, -30.9, -381, 38.6, -381)

[node name="FrontWingCollider" type="CollisionPolygon2D" parent="BodyParts/EnemyBulletDetection"]
position = Vector2(-233.341, -239.445)
scale = Vector2(1, 1)
skew = 0.174533
polygon = PackedVector2Array(187, -139, 187, -137.5, 192.6, -133.5, 196.3, -133.5, 218, -125.9, 218, -124.6, 251, -104.6, 251, -98.6, 259, -93.6, 259, -90.2, 277, -70.4, 277, -20.5, 275.9, -20.5, 262, -3.8, 262, -0.899994, 247, 21.2, 247, 24.7, 243.6, 39.5, 242.3, 39.5, 228, 70.9, 228, 79.1, 232.4, 90.5, 252, 107.6, 252, 115.9, 249.4, 122.5, 247.6, 122.5, 232.6, 132.5, 227.1, 132.5, 201, 139, 201, 139.7, 183.5, 148.5, 137, 148.5, 137, 146.6, 119.3, 134.5, 115.9, 134.5, 93, 131.2, 93, 129.4, 85, 122.4, 85, 120.2, 75, 108.2, 75, 105.9, 71.7, 98.5, 71.1, 98.5, 53.1, 76.5, 51.4, 76.5, 10.4, 50.5, 6.60001, 50.5, -35, 34.9, -35, 33.6, -79.6, 5.5, -82.3, 5.5, -89, 3.3, -138, 5.60001, -138, 4, -161.3, -3.5, -203.2, -3.5, -230, -7.8, -230, -9.2, -260, -22.2, -260, -23.8, -277, -42.6, -277, -69.5, -272.8, -73.5, -267.2, -73.5, -218, -78.3, -106.4, -131.5, -103.3, -131.5, -62.3, -145.5, -57.3, -145.5, -38.4, -148.5, 154, -148.5)

[node name="EnemyHealthTracker" type="Node" parent="." node_paths=PackedStringArray("sprite", "enemy_bullet_detection")]
script = ExtResource("9_s2mkc")
sprite = NodePath("../BodyParts")
enemy_bullet_detection = NodePath("../BodyParts/EnemyBulletDetection")

[node name="Animations" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_e66je")
}
autoplay = "flap"

[connection signal="body_entered" from="BodyParts/EnemyBulletDetection" to="BodyParts/EnemyBulletDetection" method="_on_body_entered"]
