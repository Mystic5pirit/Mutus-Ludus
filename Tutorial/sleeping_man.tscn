[gd_scene load_steps=7 format=3 uid="uid://c4lgkvdit5tvg"]

[ext_resource type="Script" path="res://Scripts/EnemyHealthTracker.gd" id="1_e070r"]
[ext_resource type="Texture2D" uid="uid://dpetuh65bidyq" path="res://Tutorial/sleeping_man.png" id="1_ru1cl"]
[ext_resource type="Script" path="res://Scripts/EnemyBulletDetection.gd" id="2_bpwiu"]
[ext_resource type="Script" path="res://Scripts/EnemyInkDropper.gd" id="4_gqidj"]

[sub_resource type="Animation" id="Animation_vm72s"]
resource_name = "Idle"
length = 169.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("BodyParts:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 2, 3, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [0.0, -0.0872665, 0.0, 0.0872665, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_i6yxk"]
_data = {
"Idle": SubResource("Animation_vm72s")
}

[node name="SleepingMan" type="Node2D"]
scale = Vector2(0.29, 0.29)

[node name="BodyParts" type="Node2D" parent="."]

[node name="Shadow" type="Sprite2D" parent="BodyParts"]
modulate = Color(0, 0, 0, 0.5)
position = Vector2(20, 10)
texture = ExtResource("1_ru1cl")

[node name="Sprite" type="Sprite2D" parent="BodyParts"]
texture = ExtResource("1_ru1cl")

[node name="EnemyBulletDetection" type="Area2D" parent="BodyParts"]
collision_layer = 0
collision_mask = 4
script = ExtResource("2_bpwiu")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="BodyParts/EnemyBulletDetection"]
polygon = PackedVector2Array(267.8, -233, 276.5, -233, 280, -231.2, 280, -229.8, 283.8, -226, 295, -228.5, 295, -226, 313, -212, 313, -209.8, 319, -203.8, 319, -197.3, 328, -176.1, 328, -121.4, 320, -105.5, 320, -97, 318.1, -97, 310.2, -83, 308.8, -83, 262, -37.2, 262, -35.5, 234.2, 18, 232.9, 18, 198, 55.9, 198, 61.4, 194.6, 70.8, 199, 76.3, 199, 94, 200, 141, 198.7, 141, 196.4, 153.5, 200, 158.3, 200, 174, 198.4, 174, 190.4, 196, 188.7, 196, 171, 210.9, 171, 215.7, 163, 226, 160.5, 226, 151.5, 231, 136, 231, 130.1, 235, 113.9, 235, 110.9, 233, 72.8, 233, 70.8, 235, 46.3, 235, -6, 228.8, -6, 226.9, -12, 221.9, -12, 219.3, -15, 212.4, -15, 200.9, -13.8, 190, -12, 190, -8, 184.4, -9.29999, 174, -7.20001, 174, 2, 155.5, 2, 147.6, 4, 142.9, -6.89999, 131, -8.70001, 131, -27.7, 115.8, -30.5, 126, -32.2, 126, -47.2, 141, -49.5, 141, -57.5, 145, -67.6, 145, -83, 134, -83, 131.4, -86.6, 113.2, -104.3, 127, -112.7, 127, -131.7, 133, -140, 133, -140, 133.9, -165.3, 155, -167.7, 155, -172, 156.4, -172, 157.6, -182, 171.6, -182, 177.2, -185.3, 198, -187, 198, -195, 208, -197.5, 208, -207.5, 213, -219.1, 213, -235, 210.7, -235, 209.3, -239.5, 207, -261.1, 207, -277, 204.7, -277, 203.1, -278.7, 202, -283, 202, -305, 203, -305, 201.7, -319, 198.6, -319, 196.8, -328, 187.8, -328, 146, -319.9, 137, -311.1, 137, -297.9, 136.1, -290.8, 129, -288.4, 129, -280, 125.6, -271.9, 116, -269.3, 116, -230, 99.7, -230, 99.1, -215, 85.1, -215, 83.4, -191.1, 48, -189.9, 48, -159.9, 13, -158.9, 13, -125.8, -18, -123.7, -18, -107.7, -30, -105.5, -30, -91.5, -37, -85.1, -37, -54.3, -45, -35.2, -45, -32.2, -42, -31, -42, -9.89999, -41.1, -4.70001, -45, 4.89999, -45, 34, -46.9, 44, -54, 44, -55.7, 57.1, -71, 59.2, -71, 66.2, -78, 68.6, -78, 72, -78.7, 72, -79.8, 79.2, -87, 81.6, -87, 85, -87.7, 118.2, -117, 120.3, -117, 132.3, -126, 134.7, -126, 154, -134.3, 154, -138.4, 170.6, -180, 172, -180, 193, -205.8, 193, -209.5, 201.8, -226, 203.4, -226, 216, -235, 266, -235)

[node name="InkDropSpot" type="Node2D" parent="BodyParts" node_paths=PackedStringArray("enemy_bullet_detection")]
position = Vector2(-307.573, 169.247)
script = ExtResource("4_gqidj")
enemy_bullet_detection = NodePath("../EnemyBulletDetection")

[node name="EnemyHealthTracker" type="Node" parent="." node_paths=PackedStringArray("sprite", "enemy_bullet_detection")]
script = ExtResource("1_e070r")
sprite = NodePath("../BodyParts")
enemy_bullet_detection = NodePath("../BodyParts/EnemyBulletDetection")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_i6yxk")
}
autoplay = "Idle"

[connection signal="body_entered" from="BodyParts/EnemyBulletDetection" to="BodyParts/EnemyBulletDetection" method="_on_body_entered"]
